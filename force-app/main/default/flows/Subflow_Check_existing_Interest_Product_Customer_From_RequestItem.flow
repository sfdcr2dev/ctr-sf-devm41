<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <assignments>
        <name>Assign_New_Product_to_Customer_Product</name>
        <label>Assign New Product to Customer Product</label>
        <locationX>1010</locationX>
        <locationY>941</locationY>
        <assignmentItems>
            <assignToReference>OutputProduct</assignToReference>
            <operator>Add</operator>
            <value>
                <stringValue>; {!LoopItemProduct}</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>LoopItemProduct</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_New_Product_to_Customer_Product_0</name>
        <label>Assign Customer Product To OutPut</label>
        <locationX>780</locationX>
        <locationY>675</locationY>
        <assignmentItems>
            <assignToReference>OutputProduct</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>fmlInputCustomerProduct</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>LoopItemProduct</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssignAddOnlyCustomerProduct</name>
        <label>AssignAddOnlyCustomerProduct</label>
        <locationX>994</locationX>
        <locationY>427</locationY>
        <assignmentItems>
            <assignToReference>OutputProduct</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>fmlInputCustomerProduct</elementReference>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>AssignAddOnlyItemProduct</name>
        <label>AssignAddOnlyItemProduct</label>
        <locationX>993</locationX>
        <locationY>251</locationY>
        <assignmentItems>
            <assignToReference>OutputProduct</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>fmlInputItemProduct</elementReference>
            </value>
        </assignmentItems>
    </assignments>
    <decisions>
        <name>check_Input_Product</name>
        <label>check Input Product</label>
        <locationX>769</locationX>
        <locationY>341</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>have_both_Item_and_customer_Product</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>InputCustomerProduct</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>InputItemProduct</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Split_Item_Product</targetReference>
            </connector>
            <label>have both Item and customer Product</label>
        </rules>
        <rules>
            <name>have_only_Item</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>InputItemProduct</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>InputCustomerProduct</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AssignAddOnlyItemProduct</targetReference>
            </connector>
            <label>have only Item</label>
        </rules>
        <rules>
            <name>have_only_Customer</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>InputCustomerProduct</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>InputItemProduct</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AssignAddOnlyCustomerProduct</targetReference>
            </connector>
            <label>have only Customer</label>
        </rules>
    </decisions>
    <decisions>
        <name>is_Match_with_Customer_Product</name>
        <label>is Match with Customer Product?</label>
        <locationX>773</locationX>
        <locationY>1117</locationY>
        <defaultConnector>
            <targetReference>Assign_New_Product_to_Customer_Product</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>new product</defaultConnectorLabel>
        <rules>
            <name>Match_with_Customer_Product</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>InputCustomerProduct</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>LoopItemProduct</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>LoopItemProduct</targetReference>
            </connector>
            <label>Match with Customer Product</label>
        </rules>
    </decisions>
    <formulas>
        <name>fmlInputCustomerProduct</name>
        <dataType>String</dataType>
        <expression>SUBSTITUTE(SUBSTITUTE({!InputCustomerProduct}, &quot;[&quot;, &quot;&quot;), &quot;]&quot;, &quot;&quot;)</expression>
    </formulas>
    <formulas>
        <name>fmlInputItemProduct</name>
        <dataType>String</dataType>
        <expression>SUBSTITUTE(SUBSTITUTE({!InputItemProduct}, &quot;[&quot;, &quot;&quot;), &quot;]&quot;, &quot;&quot;)</expression>
    </formulas>
    <interviewLabel>Subflow - Check existing Interest Product Customer From RequestItem {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Subflow - Check existing Interest Product Customer From RequestItem</label>
    <loops>
        <name>LoopItemProduct</name>
        <label>LoopItemProduct</label>
        <locationX>780</locationX>
        <locationY>834</locationY>
        <collectionReference>Split_Item_Product.varTextOutputCollection</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>is_Match_with_Customer_Product</targetReference>
        </nextValueConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <startElementReference>check_Input_Product</startElementReference>
    <status>Active</status>
    <subflows>
        <name>Split_Item_Product</name>
        <label>Split Item Product</label>
        <locationX>780</locationX>
        <locationY>491</locationY>
        <connector>
            <targetReference>Assign_New_Product_to_Customer_Product_0</targetReference>
        </connector>
        <flowName>Subflow_Custom_Split_Text_to_Collection</flowName>
        <inputAssignments>
            <name>varSymbolToSplit</name>
            <value>
                <stringValue>;</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varTextInput</name>
            <value>
                <elementReference>InputItemProduct</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <variables>
        <name>InputCustomerProduct</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>InputItemProduct</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>OutputProduct</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
</Flow>
